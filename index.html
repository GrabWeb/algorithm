<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>我的导航</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <header></header>
    <main>
        <div class = "wrapper" id = "mainxxx"></div>
    </main>
    <footer></footer>
    <script>
         var keys = {
            '0': {0:'q',1:'w',2:'e',3:'r',4:'t',5:'y',6:'u',7:'i',8:'o',9:'p',length:10},
			'1': {0:'a',1:'s',2:'d',3:'f',4:'g',5:'h',6:'j',7:'k',8:'l',length:9},
			'2': {0:'z',1:'x',2:'c',3:'v',4:'b',5:'n',6:'m',length:7},
			'length': 3
         }
         var hash = {
            'q': 'qq.com', 
            'w': 'weibo.com', 
            'e': 'ele.me', 
            'r': 'renren.com', 
            't': 'tianya.com', 
            'y': 'youtube.com', 
            'u': 'uc.com' , 
            'i': 'iqiyi.com', 
            'o': 'opera.com', 
            'p': undefined, 
            'a': 'acfun.tv', 
            's': 'sohu.com', 
            'z': 'zhihu.com', 
            'm': 'www.mcdonalds.com.cn'
         }
         //取出 localStorage 中的 zzz 对应的 hash
         var hashInLocalStorage = JSON.parse(localStorage.getItem('zzz') || 'null')
         if(hashInLocalStorage){
             hash = hashInLocalStorage //保证hash优先取之前用户设置的
         } 
         //遍历key，生成kbd标签
         index = 0
         while(index < keys['length']){
             div1 = document.createElement('div')
             mainxxx.appendChild(div1)
             row = keys[index] //第一个数组 第二个数组 第三个数组

             index2 = 0
             while(index2 < row['length']){
                kbdxxx = document.createElement('kbd')
                kbdxxx.textContent = row[index2]
                buttonxxx = document.createElement('button')
                kbdxxx.appendChild(buttonxxx)
                buttonxxx.id = row[index2]
                buttonxxx.onclick = function(event){
                    key = event.target.id   //被用户点击的那个按钮   
                    x = prompt('给我一个网址') 
                    hash[key] = x  //hash变更,使变更属性消失
                    localStorage.setItem('zzz', JSON.stringify(hash))//使用localStorage储存，解决属性消失问题
                    console.log(hash)
                }
                buttonxxx.textContent = '编辑'
                div1.appendChild(kbdxxx)
                index2 = index2 + 1
             }
             


             index = index + 1
         }

         document.onkeypress = function(event){

            key = event['key'] //获取点击事件的字母
            website = hash[key]
            console.log(website)
            //location.href = 'http://' + website //获取网页显示在当前页面地址
            window.open('http://' + website, '_blank') //在新窗口打开

         }

         
    </script>
</body>
</html>
